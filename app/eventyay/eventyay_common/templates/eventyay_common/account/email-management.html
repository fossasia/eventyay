{% extends 'eventyay_common/base.html' %}
{% load i18n %}
{% load bootstrap3 %}
{% block title %}{{ _('Email Addresses') }}{% endblock %}

{% block content %}
<h1>{{ _('Email Addresses') }}</h1>

{% if user.emailaddress_set.all %}
    <p>{{ _('The following email addresses are associated with your account:') }}</p>

    <form action="{% url 'eventyay_common:account.email' %}" class='email_list' method='post'>
        {% csrf_token %}
        <fieldset class='blockLabels'>
            {# Based on allauth/account/email.html #}
            {% for radio in emailaddress_radios %}
                {% with emailaddress=radio.emailaddress %}
                    <div class='ctrlHolder'>
                        <label for="{{ radio.id }}" class="{% if emailaddress.primary %}primary_email{% endif %}">
                            <input id="{{ radio.id }}" type='radio' name='email' {% if radio.checked %}checked{% endif %} value="{{ emailaddress.email }}"/>
                            {{ emailaddress.email }}
                            {% if emailaddress.verified %}
                                <span class='label label-success'>{{ _('Verified') }}</span>
                            {% else %}
                                <span class='label label-warning'>{{ _('Unverified') }}</span>
                            {% endif %}
                            {% if emailaddress.primary %}<span class='label label-primary'>{{ _('Primary') }}</span>{% endif %}
                        </label>
                    </div>
                {% endwith %}
            {% endfor %}

            <div class='buttonHolder'>
                <button class='btn btn-primary' type='submit' name='action_primary'>{{ _('Make Primary') }}</button>
                <button class='btn btn-default' type='submit' name='action_send'>{{ _('Re-send Verification') }}</button>
                <button class='btn btn-default' type='submit' name='action_remove'>{{ _('Remove') }}</button>
            </div>
        </fieldset>
    </form>
{% else %}
    <p><strong>{{ _('You currently do not have any email addresses associated with your account.') }}</strong></p>
{% endif %}

<h2 class='header-small'>{{ _('Add Email Address') }}</h2>

<form method='post' action="{% url 'eventyay_common:account.email' %}" class='form-horizontal form-narrow'>
    {% csrf_token %}
    {% bootstrap_form form layout='horizontal' %}
    <div class='form-group'>
        <div class='col-md-9 col-md-offset-3'>
            <button name='action_add' type='submit' class='btn btn-primary'>{{ _('Add Email') }}</button>
        </div>
    </div>
</form>

<div class='spacer'></div>
{% endblock %}
