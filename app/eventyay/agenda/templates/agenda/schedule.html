{% extends "agenda/base.html" %}

{% load compress %}
{% load i18n %}
{% load static %}
{% load phrases %}

{% block container_width %}{% if not show_talk_list %}main-schedule{% else %}list-schedule{% endif %}{% endblock container_width %}

{% block agenda_custom_header %}
<script id="pretalx-messages" data-logged-in="{% if request.user.is_anonymous %}false{% else %}true{% endif %}" src="{{ request.event.urls.schedule }}widget/messages.js"></script>
{% endblock agenda_custom_header %}

{% block header_right %}
{% include "common/fragment_header_user.html" with current_event=request.event nav_context="agenda" %}
{% endblock header_right %}

{% block agenda_content %}
<div id="fahrplan" class="{% if show_talk_list %}list{% else %}grid{% endif %}">
    <script>
    window.__SCHEDULE_DATA__ = {{ schedule_json|safe }};
    window.__SCHEDULE_META__ = {{ schedule_meta_json|safe }};
    </script>
    <script type="text/javascript" src="{{ request.event.urls.schedule_widget_script }}" async></script>

    {% with event_tz=request.event.settings.timezone|default:request.event.timezone %}
    <pretalx-schedule event-url="{{ request.event.urls.base }}" version="{{ schedule.url_version }}" locale="{{ request.LANGUAGE_CODE }}" timezone="{{ event_tz }}" {% if show_talk_list %}format="list"{% endif %} style="--pretalx-clr-primary: {{ request.event.visible_primary_color }}" disable-auto-scroll></pretalx-schedule>
    {% endwith %}
    <noscript class="d-block">
        <div class="alert alert-info m-4">
            <div></div>
            <div>
                {% blocktranslate trimmed with href=request.event.urls.schedule_nojs %}
                To see our schedule, please either enable JavaScript or go <a href="{{ href }}">here</a> for our NoJS schedule.
                {% endblocktranslate %}
            </div>
        </div>
    </noscript>
</div>
{% endblock agenda_content %}
