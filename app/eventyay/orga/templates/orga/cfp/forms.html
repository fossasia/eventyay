{% extends "orga/base.html" %}

{% load compress %}
{% load i18n %}
{% load static %}

{% block extra_title %}{{ generic_title }} :: {% endblock extra_title %}

{% block stylesheets %}
    {% compress css %}
        <link rel="stylesheet" href="{% static "orga/css/dragsort.css" %}">
    {% endcompress %}
{% endblock stylesheets %}

{% block scripts %}
    {% compress js %}
        <script defer src="{% static "common/js/modalDialog.js" %}"></script>
        <script defer src="{% static "orga/js/dragsort.js" %}"></script>
    {% endcompress %}
{% endblock scripts %}

{% block content %}
    <h2 class="d-flex">
        {{ generic_title }}
        <span data-dialog-target="#info-dialog" data-toggle="dialog">
            <i class="fa fa-question-circle-o text-info ml-2"></i>
        </span>
        <div class="ml-auto mb-3">
            {% if question_list %}
                <a href="{{ request.event.cfp.urls.remind_questions }}" class="btn btn-info">{% translate "Send out reminders for custom fields without responses" %}</a>
            {% endif %}
        </div>
    </h2>


    <dialog id="info-dialog">
        <div class="alert alert-info">
            {% blocktranslate trimmed %}
                Custom fields can help you sort out additional details with speakers, such as
                clothing sizes, special requirements such as dietary needs, or accommodation.
                Custom fields can be configured either on a per-proposal level, or per speaker, as
                you see fit.
            {% endblocktranslate %}
        </div>
    </dialog>
    <form method="post">
        {% csrf_token %}

        {% include "common/forms/errors.html" %}
        {% include "common/forms/errors.html" with form=sform %}
        {{ sform.count_length_in.as_field_group }}
        <fieldset>
            <legend id="information"><div>
                {% translate "Proposal information" %}
                <span data-dialog-target="#proposal-info-dialog" data-toggle="dialog" class="ml-2">
                    <i class="fa fa-question-circle-o text-info"></i>
                </span>
            </div></legend>

            <dialog class="info-dialog" id="proposal-info-dialog">
                <div class="alert alert-info"><span>
                    {% translate "Select which information should be requested and/or required during CfP proposal." %}
                    <a href="{{ request.event.cfp.urls.editor }}">{% translate "Click here to view the proposal form." %}</a>
                </span></div>
            </dialog>
            <div class="table-responsive-sm offset-md-3"><table class="table table-sm table-flip table-sticky cfp-option-table">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th>{% translate "Minimum length" %}</th>
                        <th>{% translate "Maximum length" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>{% translate "Title" %}</th>
                        <td></td>
                        <td>{{ sform.cfp_title_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_title_max_length.as_field_group }}</td>
                    </tr>
                    <tr>
                        <th>{% translate "Abstract" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_abstract.as_field_group }}</td>
                        <td>{{ sform.cfp_abstract_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_abstract_max_length.as_field_group }}</td>
                    </tr>
                    <tr>
                        <th>{% translate "Description" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_description.as_field_group }}</td>
                        <td>{{ sform.cfp_description_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_description_max_length.as_field_group }}</td>
                    </tr>
                    <tr{% if request.event.settings.use_tracks %}class="d-none"{% endif %}>
                        <th>{% translate "Track" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_track.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    {% if request.event.is_multilingual %}
                        <tr>
                            <th>{{ phrases.base.language }}</th>
                            <td class="hide-label">{{ sform.cfp_ask_content_locale.as_field_group }}</td>
                            <td></td>
                            <td></td>
                        </tr>
                    {% endif %}
                    <tr>
                        <th>{% translate "Additional speakers" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_additional_speaker.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Notes" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_notes.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Recording opt-out" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_do_not_record.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Session image" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_image.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Duration" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_duration.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table></div>
            <div class="row">
                <div class="col-md-9 offset-md-3 d-flex justify-content-end">
                    <a href="{{ create_url }}?target=submission" class="btn btn-success btn-sm">
                        <i class="fa fa-plus"></i> {% translate "New custom field" %}
                    </a>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend id="speaker-information">
                <div>
                    {% translate "Speaker Information" %}
                    <span data-dialog-target="#proposal-info-dialog" data-toggle="dialog" class="ml-2">
                        <i class="fa fa-question-circle-o text-info"></i>
                    </span>
                </div>
            </legend>

            <div class="table-responsive-sm offset-md-3"><table class="table table-sm table-flip table-sticky cfp-option-table">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th>{% translate "Minimum length" %}</th>
                        <th>{% translate "Maximum length" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>{% translate "Biography" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_biography.as_field_group }}</td>
                        <td>{{ sform.cfp_biography_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_biography_max_length.as_field_group }}</td>
                    </tr>
                    <tr>
                        <th>{% translate "Profile picture" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_avatar.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Availability" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_availabilities.as_field_group }}</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th>{% translate "Profile picture source" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_avatar_source.as_field_group }}</td>
                        <td>{{ sform.cfp_avatar_source_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_avatar_source_max_length.as_field_group }}</td>
                    </tr>
                    <tr>
                        <th>{% translate "Profile picture license" %}</th>
                        <td class="hide-label">{{ sform.cfp_ask_avatar_license.as_field_group }}</td>
                        <td>{{ sform.cfp_avatar_license_min_length.as_field_group }}</td>
                        <td>{{ sform.cfp_avatar_license_max_length.as_field_group }}</td>
                    </tr>
                </tbody>
            </table></div>
            <div class="row">
                <div class="col-md-9 offset-md-3 d-flex justify-content-end">
                    <a href="{{ create_url }}?target=speaker" class="btn btn-success btn-sm">
                        <i class="fa fa-plus"></i> {% translate "New custom field" %}
                    </a>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend id="reviewer-information"><div>
                {% translate "Reviewer Information" %}
            </div></legend>
            <div class="row">
                <div class="col-md-9 offset-md-3 d-flex justify-content-end">
                    <a href="{{ create_url }}?target=reviewer" class="btn btn-success btn-sm">
                        <i class="fa fa-plus"></i> {% translate "New custom field" %}
                    </a>
                </div>
            </div>
        </fieldset>
        {% include "orga/includes/submit_row.html" %}
    </form>
{% endblock %}
