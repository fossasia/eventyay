{% extends "orga/base.html" %}

{% load compress %}
{% load i18n %}
{% load static %}


{% block scripts %}
    {% compress js %}
        <script defer src="{% static 'common/js/modalDialog.js' %}"></script>
    {% endcompress %}
{% endblock scripts %}

{% block extra_title %}{% translate "Call for Proposals" %} :: {% endblock extra_title %}

{% block content %}
    <div id="main-title" class="d-md-flex justify-content-between">
    <h2>
        {% translate "Call for Proposals" %}
        <span data-dialog-target="#info-dialog" data-toggle="dialog">
            <i class="fa fa-question-circle-o text-info"></i>
        </span>
    </h2>
    {% include "orga/event/component_link.html" %}
    </div>
    <dialog class="info-dialog" id="info-dialog">
        <div class="alert alert-info">
            <span>
                {% translate "A good Call for Participation will engage potential speakers. Remember to include:" %}
                <br>
                <ul>
                    <li>{% translate "The formats (sessions, workshops, panels) and their durations" %}</li>
                    <li>{% translate "Topics you are looking for" %}</li>
                    <li>{% translate "How open you are to alternative topics" %}</li>
                    <li>{% translate "The people coming to your conference: interests, experience level â€¦" %}</li>
                    <li>{% translate "Link your Code of Conduct and Data Protection statements." %}</li>
                    <li>{% translate "Do you offer financial or other support, e.g. support for first time speakers?" %}
                    </li>
                    <li>{% translate "Dates and location" %}</li>
                </ul>
            </span>
        </div>
    </dialog>
    <form method="post">
        {% csrf_token %}

        {% include "common/forms/errors.html" %}
        {% include "common/forms/errors.html" with form=sform %}

        {% include "orga/includes/tablist.html" %}
        <section role="tabpanel" id="tabpanel-general" aria-labelledby="tab-general" tabindex="0" aria-hidden="false">
            {{ form.headline.as_field_group }}
            {{ form.text.as_field_group }}
            {{ form.deadline.as_field_group }}
            {% if different_deadlines %}
            <div class="offset-md-3 alert alert-info">
                <div>
                    {% translate "Some of your session types have different deadlines:" %}
                    <ul class="mb-0">
                        {% for deadline, session_types in different_deadlines.items %}
                        <li>
                            {% for session_type in session_types %}
                            <a href="{{ session_type.urls.base }}">{{ session_type.name }}</a>{% if not forloop.last %},{%
                            else %}:{% endif %}
                            {% endfor %}
                            {{ deadline }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% endif %}
            {{ form.show_deadline.as_field_group }}
            {{ form.hide_after_deadline.as_field_group }}
            {{ sform.use_tracks.as_field_group }}
            {{ sform.present_multiple_times.as_field_group }}
            {{ sform.submission_public_review.as_field_group }}
            {{ sform.mail_on_new_submission.as_field_group }}
        </section>
        {% include "orga/includes/submit_row.html" %}
    </form>
{% endblock content %}